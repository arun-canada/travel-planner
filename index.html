<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="TripFlow - Your ultimate travel planning companion with gamification and interactive features">
  <meta name="theme-color" content="#1F7A5A">

  <!-- Open Graph -->
  <meta property="og:title" content="TripFlow - Travel Planning Made Fun">
  <meta property="og:description"
    content="Plan your adventures with gamification, interactive maps, and smart features">
  <meta property="og:type" content="website">

  <title>TripFlow - Travel Planning Made Fun</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@600;700;800;900&display=swap"
    rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="index.css">
</head>

<body>

  <!-- Header with Navigation & XP Bar -->
  <header class="header">
    <div class="header-content">
      <div class="logo">TripFlow</div>

      <nav class="nav">
        <a href="#home" class="nav-link" data-page="home"><span>&#x1F3E0;</span> Home</a>
        <a href="#explore" class="nav-link" data-page="explore"><span>&#x1F50D;</span> Explore</a>
        <a href="#chat" class="nav-link" data-page="chat"><span>&#x1F916;</span> AI Assistant</a>
        <a href="#profile" class="nav-link" data-page="profile"><span>&#x1F464;</span> Profile</a>
      </nav>

      <div class="xp-bar-container" id="xpBarContainer">
        <span class="xp-text" id="xpText">Level 1 • 0/1000 XP</span>
        <div class="xp-bar">
          <div class="xp-fill" id="xpFill" style="width: 0%"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main id="app">

    <!-- HOME PAGE -->
    <div id="homePage" class="page-container">
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-content">
          <h1 class="hero-title">Plan Your Next Adventure</h1>
          <p class="hero-subtitle">Turn travel dreams into reality with gamification and smart planning tools</p>
          <button class="btn btn-primary btn-lg" id="createTripBtn"><span>&#x2728;</span> Create New Trip</button>
        </div>
      </section>

      <!-- Trips Grid -->
      <section class="section">
        <div class="container">
          <div class="flex-between mb-lg">
            <h2>My Trips</h2>
            <button class="btn btn-primary" id="createTripBtn2">+ New Trip</button>
          </div>
          <div id="tripsGrid" class="grid grid-3"></div>
        </div>
      </section>
    </div>

    <!-- TRIP DETAIL PAGE -->
    <div id="tripDetailPage" class="page-container hidden">
      <section class="section">
        <div class="container">
          <!-- Trip Header -->
          <div id="tripHeader" class="mb-xl"></div>

          <!-- Tabs -->
          <div class="tabs" id="tripTabs">
            <button class="tab active" data-tab="overview"><span>&#x1F4CB;</span> Overview</button>
            <button class="tab" data-tab="itinerary"><span>&#x1F4C5;</span> Itinerary</button>
            <button class="tab" data-tab="budget"><span>&#x1F4B0;</span> Budget</button>
            <button class="tab" data-tab="map"><span>&#x1F5FA;</span> Map</button>
            <button class="tab" data-tab="packing"><span>&#x1F392;</span> Packing</button>
            <button class="tab" data-tab="documents"><span>&#x1F4C4;</span> Documents</button>
          </div>

          <!-- Tab Contents -->
          <div class="tab-content active" id="overviewTab"></div>
          <div class="tab-content" id="itineraryTab"></div>
          <div class="tab-content" id="budgetTab"></div>
          <div class="tab-content" id="mapTab"></div>
          <div class="tab-content" id="packingTab"></div>
          <div class="tab-content" id="documentsTab"></div>
        </div>
      </section>
    </div>

    <!-- EXPLORE PAGE -->
    <div id="explorePage" class="page-container hidden">
      <section class="section">
        <div class="container">
          <h1 class="mb-lg">Explore Destinations</h1>

          <!-- Search Bar with Autocomplete -->
          <div class="autocomplete-container mb-md">
            <input type="text" id="countrySearch" class="form-input search-with-autocomplete"
              placeholder="Search countries or cities..." autocomplete="off">
            <div id="searchAutocomplete" class="autocomplete-dropdown hidden"></div>
          </div>

          <!-- Filter Panel -->
          <div class="filter-panel mb-lg" id="filterPanel">
            <button class="btn btn-sm btn-outline" id="toggleFilters">&#x1F527; Filters</button>
            <div class="filter-content" id="filterContent">
              <div class="filter-group">
                <label class="form-label">Budget Level</label>
                <select id="budgetFilter" class="form-select">
                  <option value="all">All Budgets</option>
                  <option value="budget">Budget-Friendly</option>
                  <option value="mid">Mid-Range</option>
                  <option value="luxury">Luxury</option>
                </select>
              </div>
              <div class="filter-group">
                <label class="form-label">Best Season</label>
                <select id="seasonFilter" class="form-select">
                  <option value="all">Any Time</option>
                  <option value="spring">Spring (Mar-May)</option>
                  <option value="summer">Summer (Jun-Aug)</option>
                  <option value="fall">Fall (Sep-Nov)</option>
                  <option value="winter">Winter (Dec-Feb)</option>
                </select>
              </div>
              <div class="filter-group">
                <label class="form-label">Vibe</label>
                <div id="vibeFilters" class="vibe-tags">
                  <button class="vibe-tag" data-vibe="beach">&#x1F3D6; Beach</button>
                  <button class="vibe-tag" data-vibe="cultural">&#x1F3DB; Cultural</button>
                  <button class="vibe-tag" data-vibe="adventure">&#x1F3D4; Adventure</button>
                  <button class="vibe-tag" data-vibe="nightlife">&#x1F389; Nightlife</button>
                  <button class="vibe-tag" data-vibe="relaxing">&#x1F9D8; Relaxing</button>
                  <button class="vibe-tag" data-vibe="luxury">&#x1F48E; Luxury</button>
                </div>
              </div>
              <button class="btn btn-sm btn-primary" id="applyFilters">Apply Filters</button>
              <button class="btn btn-sm btn-secondary" id="clearFilters">Clear</button>
            </div>
          </div>

          <!-- Country Grid -->
          <div id="countryGrid" class="country-grid"></div>
        </div>
      </section>
    </div>

    <!-- PROFILE PAGE -->
    <div id="profilePage" class="page-container hidden">
      <section class="section">
        <div class="container">
          <h1 class="mb-lg">Your Travel Profile</h1>

          <!-- Level & XP Display -->
          <div class="card card-dark mb-xl" id="profileHeader">
            <div class="text-center">
              <div style="font-size: 4rem; margin-bottom: 1rem;">🏆</div>
              <h2 id="profileLevel" style="color: var(--text-light);">Level 1 Explorer</h2>
              <p id="profileXP" style="color: var(--mint); font-size: 1.25rem; margin-top: 0.5rem;">0 / 1000 XP</p>
            </div>
          </div>

          <!-- Stats Grid -->
          <h3 class="mb-md">Statistics</h3>
          <div id="statsGrid" class="stats-grid mb-xl"></div>

          <!-- Achievements -->
          <h3 class="mb-md">Achievements</h3>
          <div id="achievementsGrid" class="achievement-grid"></div>

          <!-- Settings Section -->
          <h3 class="mb-md mt-xl">Settings</h3>
          <div class="card mb-lg">
            <h4 style="margin-bottom: 1rem;">AI Itinerary Generation</h4>
            <p style="margin-bottom: 1rem; color: #666; font-size: 0.9rem;">
              Enter your Google Gemini API key to generate real, location-specific itineraries.
              <a href="https://makersuite.google.com/app/apikey" target="_blank" style="color: var(--primary);">Get a free API key</a>
            </p>
            <div class="field-group">
              <label class="form-label">Gemini API Key</label>
              <div style="display: flex; gap: 0.5rem;">
                <input type="password" id="geminiApiKey" class="form-input" placeholder="Enter your Gemini API key" style="flex: 1;">
                <button class="btn btn-primary" onclick="saveGeminiApiKey()">Save</button>
              </div>
              <div id="apiKeyStatus" style="margin-top: 0.5rem; font-size: 0.85rem;"></div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- AI ASSISTANT CHAT PAGE -->
    <div id="chatPage" class="page-container hidden">
      <section class="section">
        <div class="container">
          <h1 class="mb-lg">&#x1F916; AI Travel Assistant</h1>
          <div class="chat-container">
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input-container">
              <input type="text" id="chatInput" class="form-input" placeholder="Tell me about your dream trip..." />
              <button id="chatSend" class="btn btn-primary">Send</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- INLINE TRIP PLANNER OVERLAY -->
    <div id="inlinePlannerOverlay" class="inline-planner-overlay hidden">
      <div class="inline-planner-content">
        <div class="container">
          <div class="wizard-header">
            <h1 class="wizard-title">📝 Smart Trip Planner</h1>
            <button class="wizard-close" id="closePlanner" title="Close wizard">✕</button>
          </div>
          <div class="wizard-container">
            <div class="wizard-steps" id="wizardSteps"></div>
            <div id="wizardContent" class="wizard-content"></div>
            <div class="wizard-navigation">
              <button id="wizardPrev" class="btn btn-secondary">← Back</button>
              <button id="wizardNext" class="btn btn-primary">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- Modal Overlay -->
  <div id="modalOverlay" class="modal-overlay hidden">
    <div class="modal" id="modalContent"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Achievement Unlock Overlay -->
  <div id="achievementOverlay" class="achievement-overlay hidden"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- App JS -->
  <script src="app.js"></script>

  <!-- AI Assistant - Menu-Based System -->
  <script src="ai-assistant-complete.js"></script>

</body>

</html>

